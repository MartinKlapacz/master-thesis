\section{Rule Language Specification}\label{sec:rule-language-specification}

Traditionally, billing experts create bills for treatments using their knowledge in this field.
They need to know the conditions which must hold and which make a billing code applicable.
This work introduces a new JSON-based domain specific rule language billing experts can use to encode this kind of knowledge.
The billing optimization framework loads and understands those rule files and uses their encoded knowledge to automatically derive billing codes.
Section \todo{add section} describes this procedure in more detail.

As a computer scientist, I initially lacked important medical knowledge.
This is why I conducted several expert interviews with Dr. Lorenz Thumann and Dr. Sahra Bojko, both Medical Managers at \AV.
In these interviews, I gained crucial knowledge in medical billing and collected formal requirements for the billing framework.
Other important sources of knowledge were the GOÄ as well as the EBM catalog.

Dr. Thumann provided me with more general insights on medical billing in Germany.
Dr. Bojko provided me with useful feedback on my rule language designs while I supported her in writing first billing rules.

The development workflow of the rule language during my time at \AV worked was structured as follows:

\begin{enumerate}
    \item I regularly found previously unknown edge cases, either as the result of an expert interview or own research in one of the billing catalogs, that the billing framework but be able to handle.
    For those edge cases that could not be expressed in the rule language.
    \item I regularly conducted expert interviews and also did my research in the GOÄ and EBM catalogs.
    In doing so, I continually discovered relevant edge cases that the framework needed to cover.
    However, many of them were not expressible with the current version of the rule language.
    \item Based on those edge case, I established new formal requirements for the framework.
    \item I then specified a proposal for the formal requirement, outlining how to extend the rule language in such a way that it can cover the respective edge case.
    This could be, for example, a new condition keyword or a more complex rule feature.
    \item Subsequently, I consulted with Sahra Bojko and presented the feature to her.
    It is essential that the language feature is intuitive and easy to use for the medical professionals.
    If Dr. Bojko agrees with the proposal, I implement the feature.
    \item At larger intervals, I meet with my advisor Nicolas Jacob and gave him an update on the new changes since our last meeting.
    During those meetings, I received feedback on the technical implementations.
\end{enumerate}

In the following sections, we formally define the rule language and provide justifications for the presented language features.




\input{content/04_theBillingOptimizationFramework/03_ruleLanguageSpecification/01_theConditionPredicate}
\input{content/04_theBillingOptimizationFramework/03_ruleLanguageSpecification/02_numericFunctions/numericFunctions}
